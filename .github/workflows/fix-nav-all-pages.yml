name: Fix Nav White All Pages

on:
  workflow_dispatch:

jobs:
  fix-nav-all:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3
        with:
          token: ${{ secrets.GH_TOKEN }}

      - name: Inject white nav fix into ALL html pages
        run: |
          for file in *.html; do
            echo "Fixing nav in: $file"
            sed -i 's|</head>|<style>\nnav a, nav a:link, nav a:visited, nav a:hover, .nav-link, header a, .menu a {\n  color: #ffffff !important;\n  font-weight: bold !important;\n  text-shadow: 2px 2px 6px rgba(0,0,0,1), 0 0 10px rgba(0,0,0,0.9) !important;\n  -webkit-text-stroke: 0.5px white !important;\n}\n</style>\n</head>|g' "$file"
          done

      - name: Commit and push
        run: |
          git config user.name "GitHub Agent"
          git config user.email "agent@github.com"
          git add *.html
          git commit -m "Agent fix: White nav text applied to ALL pages" || echo "No changes"
          git push
