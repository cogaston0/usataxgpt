<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carlos Olivencia — Tax Division</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body data-page="home">

  <!-- ===== HEADER ===== -->
  <header class="site-header">
    <div class="header-container">
      <div class="logo">
        <img src="logo.png" alt="Carlos Olivencia Logo">
      </div>
      <button class="hamburger" id="hamburger" aria-label="Open menu">
        <span></span><span></span><span></span>
      </button>
      <nav class="main-nav" id="mainNav">
        <a href="index.html" class="active">Home</a>
        <a href="services.html">Services</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
        <a href="login.html">Login</a>
      </nav>
    </div>
  </header>

  <!-- ===== HERO / INTAKE ===== -->
  <section class="hero">
    <div class="intake-card" id="draggableCard">
      <h2>Carlos Olivencia — Tax Intake</h2>
      <div class="secure">● Secure Connection Active</div>
      <p>Welcome to Carlos Olivencia Tax Services.</p>
      <p>I will guide you step-by-step through your tax intake. This information is encrypted and secure.</p>
      <p>Are you ready to start your 2025 tax intake?</p>
      <div class="input-area">
        <input type="text" id="userInput" placeholder="Type your response...">
        <button id="sendBtn">Send</button>
      </div>
    </div>
  </section>

  <!-- ===== FOOTER ===== -->
  <footer class="site-footer">
    © 2025 Carlos Olivencia Tax &amp; Financial Services |
    <a href="privacy.html">Privacy Policy</a> |
    <a href="terms.html">Terms of Service</a>
  </footer>

  <script>
    // ── Hamburger ──
    const btn  = document.getElementById("hamburger");
    const nav  = document.getElementById("mainNav");
    const card = document.getElementById("draggableCard");

    btn.addEventListener("click", function () {
      const isOpening = !btn.classList.contains("open");
      btn.classList.toggle("open");
      nav.classList.toggle("open");
      card.style.visibility = isOpening ? "hidden" : "visible";
      card.style.opacity    = isOpening ? "0" : "1";
    });

    nav.querySelectorAll("a").forEach(function(link) {
      link.addEventListener("click", function () {
        btn.classList.remove("open");
        nav.classList.remove("open");
        card.style.visibility = "visible";
        card.style.opacity    = "1";
      });
    });

    // ── Send button handler ──
    const userInput = document.getElementById("userInput");
    const sendBtn   = document.getElementById("sendBtn");

    function handleSend() {
      const val = userInput.value.trim();
      if (!val) return;
      console.log("User said:", val);
      // TODO: plug in your chatbot logic here
      userInput.value = "";
    }

    sendBtn.addEventListener("click", handleSend);
    userInput.addEventListener("keydown", function(e) {
      if (e.key === "Enter") handleSend();
    });

    // ── Drag (mouse + touch) ──
    // Exclude interactive elements so clicks/typing still work
    const DRAG_EXCLUDE = ["INPUT", "BUTTON", "TEXTAREA", "SELECT", "A"];

    const hero = card.parentElement;
    let isDragging = false, offsetX, offsetY;

    function startDrag(x, y) {
      isDragging = true;
      offsetX = x - card.offsetLeft;
      offsetY = y - card.offsetTop;
    }

    function moveDrag(x, y) {
      if (!isDragging) return;
      const heroRect = hero.getBoundingClientRect();
      let newLeft = Math.max(0, Math.min(x - offsetX, heroRect.width  - card.offsetWidth));
      let newTop  = Math.max(0, Math.min(y - offsetY, heroRect.height - card.offsetHeight));
      card.style.left = newLeft + "px";
      card.style.top  = newTop  + "px";
    }

    function endDrag() { isDragging = false; }

    card.addEventListener("mousedown", function(e) {
      if (DRAG_EXCLUDE.includes(e.target.tagName)) return; // let clicks through
      startDrag(e.clientX, e.clientY);
      e.preventDefault(); // only prevent default when actually dragging
    });

    document.addEventListener("mousemove", function(e) { moveDrag(e.clientX, e.clientY); });
    document.addEventListener("mouseup",   endDrag);

    card.addEventListener("touchstart", function(e) {
      if (DRAG_EXCLUDE.includes(e.target.tagName)) return; // allow keyboard on input
      startDrag(e.touches[0].clientX, e.touches[0].clientY);
      // NOTE: no e.preventDefault() here so mobile keyboard can open on input
    }, { passive: true });

    document.addEventListener("touchmove", function(e) {
      if (!isDragging) return;
      moveDrag(e.touches[0].clientX, e.touches[0].clientY);
      e.preventDefault();
    }, { passive: false });

    document.addEventListener("touchend", endDrag);
  </script>

</body>
</html>
